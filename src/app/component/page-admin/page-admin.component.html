<body>
  <div id="content">
    <h1>Espace administrateur</h1>
    <h2>Statistiques</h2>

    <div *ngIf="displayStatistics">
      <div id="statistiquesJPO">
        <section>
          <button (click)="showStats()">Réponses au questionnaire</button>
          <button (click)="showList()">Voir la liste des participants</button>
        </section>
        <p class="participants">Nombre de visiteurs : {{ users.itemCount }}</p>


        <section *ngIf="displayList">
          <h3>Liste des visiteurs</h3>
          <div *ngFor="let user of users.body">
            <p class="participants">Nom : {{ user.name }} | Prénom : {{ user.firstname }} | Email : {{ user.mail }}</p>
            <hr>
          </div>
        </section>


        <section *ngIf="displayStats">
          <h3>Réponses au questionnaire</h3>

          <form (ngSubmit)="searchUser()" #searchForm="ngForm">
            <label for="email">Rechercher un visiteur</label>
            <input type="email" id="email" name="email" [(ngModel)]="searchUserMail" placeholder="martin@gmail.com" required>
            <button  type="submit">Rechercher</button>
            <button id="reset"(click)="resetSearch()">Réinitialiser la recherche</button>

          </form>



          <section *ngIf="searchResults.length > 0">
            <h3>Résultats de la recherche :</h3>

            <ng-container *ngFor="let group of searchResults; let i = index">
              <section class="questionSearch">
                <p class="question">{{ 'Q' + (i + 1) + '. ' + group.question }}</p>
                <ul>
                  <li *ngFor="let answer of group.answers">
                    <p><strong>{{ answer.answer }}</strong> de {{ answer.mail }}</p>
                  </li>
                </ul>
              </section>
            </ng-container>
          </section>

          
        <section class="questionGroup" *ngFor="let group of groupedAnswers; let i = index">
          <p class="question">{{ 'Q' + (i + 1) + '. ' + group.question }}</p>
          <ul>
            <li *ngFor="let answer of group.answers">
              <p><strong>{{ answer.answer }}</strong> de {{ answer.mail }}</p>
            </li>
          </ul>
        </section>

        </section>

      </div>
    </div>
  </div>
  <app-footer></app-footer>

  <script src="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
  <script>
    // Placez votre code Chartist.js ici pour générer les graphiques
    // Par exemple, utilisez une boucle pour créer plusieurs graphiques en fonction de la structure de groupedAnswers
  </script>
</body>
